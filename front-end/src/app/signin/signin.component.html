<div class="signin-page">
    <div class="main-signin-div">
        <h1>Create Account</h1>
        
        <div class="profile-picture" (click)="editPfp = true">
            <img *ngIf="previewUrl" 
                 [src]="previewUrl" 
                 class="selected-profile-img" 
                 (error)="handleImageError($event)">
            
            <span *ngIf="!previewUrl">Click to choose profile picture</span>
        </div>

        <div class="username-password-input">
            <p>Username</p>
            <input [(ngModel)]="username" placeholder="Enter your username">
            <p>Password</p>
            <input type="password" [(ngModel)]="password" placeholder="Enter your password">
        </div>

        <button class="confirm-sign-in" (click)="createAccount()">Create Account</button>
    </div>

    @if(editPfp){
        <div class="edit-profile-picture-div">
            <div class="edit-profile-content">
                <h2>Choose Profile Picture</h2>
                
                <div class="profile-pictures-grid">
                    <img 
                        *ngFor="let pic of profilePictures; let i = index" 
                        [src]="pic" 
                        class="profile-picture-option"
                        [class.selected]="previewUrl === pic" 
                        (click)="selectProfilePicture(pic)"
                        [alt]="'Profile picture option ' + (i + 1)"
                        (error)="handleImageError($event)">
                </div>

                <div class="action-buttons-container" style="display: flex; gap: 10px; justify-content: center; margin: 15px 0;">
                    
                    <button class="random-button" (click)="selectRandomPicture()">
                        ðŸŽ² Random
                    </button>

                    <label for="fileUploadInput" class="random-button" style="cursor: pointer; background-color: #4CAF50;">
                        ðŸ“‚ Upload Own
                    </label>
                    <input 
                        id="fileUploadInput"
                        type="file" 
                        accept="image/*" 
                        (change)="onFileSelected($event)" 
                        style="display: none;">
                </div>

                <div class="edit-profile-buttons">
                    <button class="edit-profile-button confirm" (click)="confirmProfilePicture()">
                        Confirm
                    </button>
                    <button class="edit-profile-button cancel" (click)="editPfp = false">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    }
</div>